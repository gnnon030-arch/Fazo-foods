<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fazo foods | 180+ taomlar</title>

    <!-- KODNI CTRL+U BILAN KO'RISHNI BLOKLASH -->
    <script>
        // Disable right click
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });

        // Disable F12, Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+S
        document.addEventListener('keydown', function (e) {
            if (e.key === 'F12' ||
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'J') ||
                (e.ctrlKey && e.key === 'U') ||
                (e.ctrlKey && e.key === 's') ||
                (e.ctrlKey && e.key === 'S')) {
                e.preventDefault();
                return false;
            }
        });

        // Anti-view source - console warning
        console.log('%cüö´ Source code viewing is disabled!', 'color: red; font-size: 20px; font-weight: bold;');
    </script>

    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Montserrat:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #f5b342;
            --primary-dark: #e09d2e;
            --bg: #0f0b07;
            --card-bg: #1e1610;
            --accent: #ffd966;
            --text-light: #ffffff;
            --text-muted: #e0d6cc;
            --admin-bg: #1a130c;
            --success: #4caf50;
            --danger: #f44336;
            --warning: #ff9800;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0f0b07 0%, #1a130c 100%);
            color: var(--text-light);
            overflow-x: hidden;
            scroll-behavior: smooth;
            font-family: 'Montserrat', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Playfair Display', serif;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }

            50% {
                transform: translateY(-8px) rotate(3deg);
            }
        }

        .float-emoji {
            display: inline-block;
            animation: float 3s infinite ease-in-out;
        }

        @keyframes slowSpin {
            0% {
                transform: rotate(0deg) scale(1);
            }

            50% {
                transform: rotate(5deg) scale(1.05);
            }

            100% {
                transform: rotate(0deg) scale(1);
            }
        }

        @keyframes float3D {
            0% {
                transform: perspective(1000px) rotateY(0deg) translateZ(0);
            }

            25% {
                transform: perspective(1000px) rotateY(5deg) translateZ(20px);
            }

            50% {
                transform: perspective(1000px) rotateY(0deg) translateZ(0);
            }

            75% {
                transform: perspective(1000px) rotateY(-5deg) translateZ(20px);
            }

            100% {
                transform: perspective(1000px) rotateY(0deg) translateZ(0);
            }
        }

        .animated-image {
            animation: float3D 8s ease-in-out infinite;
            transition: all 0.5s ease;
            box-shadow: 0 30px 60px rgba(245, 179, 66, 0.3);
            border: 4px solid var(--primary);
        }

        .animated-image:hover {
            animation: slowSpin 3s ease-in-out infinite;
            transform: scale(1.08);
            box-shadow: 0 40px 80px rgba(245, 179, 66, 0.5);
            border-color: var(--primary-dark);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 8%;
            background: rgba(15, 11, 7, 0.98);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(245, 179, 66, 0.2);
            flex-wrap: wrap;
            gap: 15px;
        }

        /* LOGOTIP - CHAP TOMON */
        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-image {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), #ffd966);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: #0f0b07;
            box-shadow: 0 5px 15px rgba(245, 179, 66, 0.4);
            transform: rotate(0deg);
            transition: 0.3s;
        }

        .logo-image:hover {
            transform: rotate(5deg) scale(1.05);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-main {
            font-size: 24px;
            font-weight: 900;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
            text-shadow: 0 2px 10px rgba(245, 179, 66, 0.3);
            line-height: 1.2;
        }

        .logo-main span {
            color: var(--text-light);
            font-weight: 700;
        }

        .logo-sub {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 3px;
            font-weight: 300;
            margin-top: 2px;
        }

        .nav-right {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .profile-container {
            position: relative;
            display: inline-block;
        }

        .profile-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: 0.3s;
            overflow: hidden;
        }

        .profile-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-icon i {
            font-size: 24px;
            color: #0f0b07;
        }

        .profile-icon:hover {
            border-color: white;
            transform: scale(1.05);
        }

        .profile-dropdown {
            position: absolute;
            right: 0;
            top: 60px;
            width: 320px;
            background: var(--admin-bg);
            border: 1px solid var(--primary);
            border-radius: 12px;
            padding: 20px;
            display: none;
            z-index: 1001;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .profile-dropdown.active {
            display: block;
        }

        .profile-dropdown-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .profile-dropdown-close {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.08);
            border: none;
            color: var(--text-muted);
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
        }

        .profile-dropdown-close:hover {
            background: rgba(245, 179, 66, 0.15);
            color: var(--primary);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(245, 179, 66, 0.2);
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid var(--primary);
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-info h4 {
            color: var(--primary);
            margin-bottom: 5px;
        }

        .profile-info p {
            font-size: 12px;
            color: var(--text-muted);
        }

        .profile-field {
            margin-bottom: 15px;
        }

        .profile-field label {
            display: block;
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 5px;
        }

        .profile-field input {
            width: 100%;
            padding: 10px;
            background: #2c1e14;
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 14px;
        }

        .profile-field input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .profile-field input[readonly] {
            background: rgba(44, 30, 20, 0.5);
            color: var(--text-muted);
            cursor: not-allowed;
        }

        .save-profile-btn {
            background: var(--primary);
            color: #0f0b07;
            border: none;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
            transition: 0.3s;
        }

        .save-profile-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .logout-btn {
            background: transparent;
            color: var(--danger);
            border: 1px solid var(--danger);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
            transition: 0.3s;
        }

        .logout-btn:hover {
            background: var(--danger);
            color: white;
        }

        .badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .badge-success {
            background: var(--success);
            color: white;
        }

        .badge-danger {
            background: var(--danger);
            color: white;
        }

        .badge-warning {
            background: var(--warning);
            color: #0f0b07;
        }

        .badge-admin {
            background: linear-gradient(135deg, #f5b342, #ffd966);
            color: #0f0b07;
        }

        .search-container {
            position: relative;
            display: inline-block;
        }

        .search-input {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 12px;
            padding: 12px 45px 12px 20px;
            color: var(--text-light);
            font-size: 14px;
            width: 250px;
            transition: 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.05);
            width: 300px;
        }

        .search-input::placeholder {
            color: var(--text-muted);
            opacity: 0.7;
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            cursor: pointer;
            font-size: 16px;
        }

        .clear-search {
            position: absolute;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            cursor: pointer;
            font-size: 14px;
            display: none;
        }

        .clear-search:hover {
            color: var(--primary);
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.03);
            padding: 12px 22px;
            border-radius: 12px;
            font-size: 14px;
            cursor: pointer;
            color: var(--text-light);
            border: 1px solid rgba(245, 179, 66, 0.2);
            transition: 0.3s;
            font-weight: 500;
            text-decoration: none;
        }

        .nav-btn:hover {
            border-color: var(--primary);
            background: rgba(245, 179, 66, 0.1);
            color: var(--primary);
            transform: translateY(-2px);
        }

        .cart-icon-btn {
            background: var(--primary);
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            box-shadow: 0 5px 20px rgba(245, 179, 66, 0.4);
            transition: 0.3s;
        }

        .cart-icon-btn:hover {
            transform: scale(1.05);
            background: var(--primary-dark);
        }

        .admin-panel {
            position: fixed;
            right: -1000px;
            top: 0;
            width: 1000px;
            max-width: 95vw;
            height: 100vh;
            background: var(--admin-bg);
            z-index: 2000;
            transition: 0.4s;
            padding: 30px;
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.8);
            overflow-y: auto;
            border-left: 2px solid var(--primary);
        }

        .admin-panel.active {
            right: 0;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(245, 179, 66, 0.3);
        }

        .admin-title {
            font-size: 32px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-close {
            font-size: 30px;
            cursor: pointer;
            color: var(--text-muted);
            transition: 0.3s;
        }

        .admin-close:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }

        .admin-login-box {
            text-align: center;
            padding: 50px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            margin-top: 50px;
        }

        .admin-login-box h2 {
            color: var(--primary);
            margin-bottom: 30px;
        }

        .admin-login-box input {
            width: 100%;
            max-width: 300px;
            padding: 15px;
            background: #2c1e14;
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 12px;
            color: var(--text-light);
            font-size: 16px;
            margin-bottom: 20px;
        }

        .admin-login-box input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .admin-login-box button {
            background: var(--primary);
            color: #0f0b07;
            padding: 15px 40px;
            border: none;
            border-radius: 12px;
            font-weight: 800;
            cursor: pointer;
            font-size: 16px;
        }

        .admin-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .admin-tab {
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s;
        }

        .admin-tab:hover,
        .admin-tab.active {
            background: var(--primary);
            color: #0f0b07;
            border-color: var(--primary);
        }

        .admin-content {
            display: none;
        }

        .admin-content.active {
            display: block;
        }

        .admin-section-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--primary);
            position: relative;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(245, 179, 66, 0.3);
        }

        .admin-search-container {
            position: relative;
            margin-bottom: 30px;
        }

        .admin-search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            background: #2c1e14;
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 12px;
            color: var(--text-light);
            font-size: 15px;
            transition: 0.3s;
        }

        .admin-search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(245, 179, 66, 0.1);
        }

        .admin-search-input::placeholder {
            color: var(--text-muted);
            opacity: 0.7;
        }

        .admin-search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 18px;
        }

        .admin-clear-search {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            cursor: pointer;
            font-size: 16px;
            display: none;
        }

        .admin-clear-search:hover {
            color: var(--primary);
        }

        .admin-search-stats {
            text-align: right;
            margin-top: 5px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .admin-search-stats span {
            color: var(--primary);
            font-weight: 600;
        }

        .users-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .users-table th {
            background: rgba(245, 179, 66, 0.1);
            padding: 15px;
            text-align: left;
            color: var(--primary);
            font-weight: 600;
            border-bottom: 2px solid var(--primary);
        }

        .users-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(245, 179, 66, 0.1);
            vertical-align: middle;
        }

        .users-table tr:hover {
            background: rgba(245, 179, 66, 0.05);
        }

        .users-table tr.blocked {
            background: rgba(244, 67, 54, 0.1);
            opacity: 0.7;
        }

        .block-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 5px;
            font-size: 12px;
        }

        .unblock-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .delete-user-btn {
            background: #7b0000;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 5px;
        }

        .delete-user-btn:hover {
            background: #a00000;
        }

        .make-admin-btn {
            background: linear-gradient(135deg, #f5b342, #e09d2e);
            color: #0f0b07;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 5px;
            font-weight: 700;
        }

        .remove-admin-btn {
            background: #555;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 5px;
        }

        .max-order-input {
            width: 70px;
            padding: 5px;
            background: #2c1e14;
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 5px;
            color: white;
            text-align: center;
        }

        .update-max-btn {
            background: var(--primary);
            color: #0f0b07;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 5px;
            font-size: 12px;
        }

        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .orders-table th {
            background: rgba(245, 179, 66, 0.1);
            padding: 15px;
            text-align: left;
            color: var(--primary);
            font-weight: 600;
            border-bottom: 2px solid var(--primary);
        }

        .orders-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(245, 179, 66, 0.1);
        }

        .orders-table tr:hover {
            background: rgba(245, 179, 66, 0.05);
        }

        .order-items {
            max-width: 300px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .delete-order-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: 0.2s;
        }

        .delete-order-btn:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-edit-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 15px;
            padding: 15px;
            transition: 0.3s;
        }

        .product-edit-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(245, 179, 66, 0.15);
        }

        .product-edit-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: 0.3s;
        }

        .product-edit-card img:hover {
            border-color: var(--primary);
        }

        .product-edit-card input,
        .product-edit-card select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            background: #2c1e14;
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 8px;
            color: var(--text-light);
        }

        .product-edit-card input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .product-weight-badge {
            display: inline-block;
            background: rgba(245, 179, 66, 0.1);
            color: var(--primary);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 13px;
            margin-bottom: 10px;
        }

        .product-category-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-muted);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            margin-left: 5px;
        }

        .save-btn {
            background: var(--primary);
            color: #0f0b07;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: 0.3s;
        }

        .save-btn:hover {
            background: var(--primary-dark);
        }

        .delete-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
        }

        /* Add User Form */
        .add-user-form {
            background: rgba(245, 179, 66, 0.05);
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 14px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .add-user-form h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 16px;
        }

        .add-user-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }

        .add-user-grid input {
            padding: 10px;
            background: #2c1e14;
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 13px;
        }

        .add-user-grid input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .add-user-btn {
            background: var(--primary);
            color: #0f0b07;
            border: none;
            padding: 10px 22px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            font-size: 14px;
            transition: 0.2s;
        }

        .add-user-btn:hover {
            background: var(--primary-dark);
        }

        /* Hero */
        .hero {
            display: flex;
            align-items: center;
            padding: 60px 8% 40px;
            min-height: 85vh;
            gap: 50px;
        }

        .hero-left {
            flex: 1.2;
        }

        .top-badge {
            background: rgba(245, 179, 66, 0.1);
            padding: 10px 22px;
            border-radius: 40px;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
            border: 1px solid rgba(245, 179, 66, 0.3);
            color: var(--primary);
            font-weight: 600;
        }

        .hero-left h1 {
            font-size: 72px;
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 25px;
            font-family: 'Playfair Display', serif;
            background: linear-gradient(135deg, #ffffff 0%, #f5b342 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-left h1 span {
            color: var(--primary);
            -webkit-text-fill-color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 5px;
        }

        .hero-left p {
            color: var(--text-muted);
            font-size: 18px;
            margin-bottom: 40px;
            line-height: 1.8;
            max-width: 550px;
            font-weight: 400;
        }

        .cta-btn {
            background: linear-gradient(135deg, var(--primary), #ffd966);
            color: #0f0b07;
            padding: 18px 45px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 16px;
            border: none;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(245, 179, 66, 0.3);
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .cta-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(245, 179, 66, 0.4);
        }

        .cta-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .stats-box {
            display: flex;
            gap: 60px;
            margin-top: 60px;
        }

        .stat-item h2 {
            font-size: 44px;
            font-weight: 900;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
            text-shadow: 0 2px 10px rgba(245, 179, 66, 0.2);
        }

        .stat-item p {
            font-size: 15px;
            color: var(--text-muted);
            margin-top: 5px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .hero-right {
            flex: 1;
            display: flex;
            justify-content: flex-end;
        }

        .circle-img {
            width: 500px;
            height: 500px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
            border: 4px solid rgba(245, 179, 66, 0.3);
            transition: 0.3s;
        }

        .circle-img:hover {
            transform: scale(1.02);
            border-color: var(--primary);
        }

        .menu-section {
            padding: 80px 8% 100px;
            background: linear-gradient(135deg, #0f0b07 0%, #1a130c 100%);
        }

        .filter-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 14px 30px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(245, 179, 66, 0.2);
            color: var(--text-light);
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .filter-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: #0f0b07;
        }

        .filter-btn:hover {
            border-color: var(--primary);
            background: rgba(245, 179, 66, 0.1);
        }

        .search-stats {
            text-align: center;
            margin-bottom: 20px;
            color: var(--text-muted);
            font-size: 14px;
        }

        .search-stats span {
            color: var(--primary);
            font-weight: 600;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.03);
            transition: 0.3s;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .card.blocked {
            opacity: 0.5;
            pointer-events: none;
            filter: grayscale(100%);
        }

        .card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(245, 179, 66, 0.15);
        }

        .card img {
            width: 100%;
            height: 220px;
            border-radius: 12px;
            object-fit: cover;
            margin-bottom: 15px;
            border: 2px solid rgba(245, 179, 66, 0.1);
        }

        .card:hover img {
            border-color: var(--primary);
        }

        .card h3 {
            font-size: 22px;
            margin-bottom: 5px;
            color: var(--text-light);
            font-weight: 700;
        }

        .product-weight {
            font-size: 14px;
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 500;
            background: rgba(245, 179, 66, 0.1);
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
        }

        .goto-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: #0f0b07;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: 0.3s;
            border: none;
            font-size: 18px;
        }

        .card:hover .goto-btn {
            opacity: 1;
        }

        .goto-btn:hover {
            transform: scale(1.1);
            background: var(--primary-dark);
        }

        .quantity-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            background: rgba(0, 0, 0, 0.2);
            padding: 8px;
            border-radius: 12px;
        }

        .qty-btn {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(245, 179, 66, 0.2);
            background: transparent;
            color: var(--text-light);
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        .qty-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .qty-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background: rgba(245, 179, 66, 0.1);
            color: var(--primary);
        }

        .qty-btn.plus {
            background: var(--primary);
            border-color: var(--primary);
            color: #0f0b07;
        }

        .qty-btn.plus:hover:not(:disabled) {
            background: var(--primary-dark);
        }

        .qty-value {
            font-weight: 800;
            min-width: 40px;
            text-align: center;
            font-size: 18px;
            color: var(--primary);
        }

        .side-panel {
            position: fixed;
            right: -450px;
            top: 0;
            width: 450px;
            height: 100vh;
            background: #1a130c;
            z-index: 2000;
            transition: 0.4s;
            padding: 35px;
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            border-left: 1px solid rgba(245, 179, 66, 0.3);
        }

        .side-panel.active {
            right: 0;
        }

        #aboutModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 11, 7, 0.95);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(8px);
        }

        .about-box {
            background: #1a130c;
            padding: 45px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            border: 1px solid var(--primary);
            text-align: center;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
        }

        .checkout-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 20px 0;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-size: 14px;
            color: var(--primary);
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea {
            background: #2c1e14;
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 12px;
            padding: 14px 18px;
            color: var(--text-light);
            font-size: 14px;
            transition: 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(245, 179, 66, 0.1);
        }

        .order-summary {
            background: #2c1e14;
            border-radius: 12px;
            padding: 18px;
            margin: 20px 0;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid rgba(245, 179, 66, 0.2);
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--text-muted);
            padding: 5px 0;
            border-bottom: 1px dashed rgba(245, 179, 66, 0.2);
        }

        .summary-total {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid var(--primary);
            font-weight: 800;
            color: var(--primary);
            font-size: 18px;
        }

        .step-indicator {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
        }

        .step {
            flex: 1;
            text-align: center;
            padding: 12px;
            border-radius: 12px;
            background: #2c1e14;
            color: var(--text-muted);
            font-size: 13px;
            font-weight: 600;
            border: 1px solid rgba(245, 179, 66, 0.2);
        }

        .step.active {
            background: var(--primary);
            color: #0f0b07;
            border-color: var(--primary);
        }

        .back-btn {
            background: transparent;
            border: 1px solid rgba(245, 179, 66, 0.3);
            color: var(--text-light);
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: 0.3s;
            font-weight: 600;
        }

        .back-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background: rgba(245, 179, 66, 0.1);
        }

        .error-message {
            color: #ff6b6b;
            font-size: 13px;
            margin-top: 5px;
            display: none;
        }

        .quantity-input {
            width: 60px;
            text-align: center;
            background: #2c1e14;
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 8px;
            color: var(--text-light);
            padding: 5px;
            margin: 0 5px;
        }

        .quantity-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .footer {
            background: rgba(15, 11, 7, 0.95);
            border-top: 1px solid rgba(245, 179, 66, 0.2);
            padding: 30px 8%;
            text-align: center;
            margin-top: auto;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .footer-logo {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
        }

        .footer-text {
            color: var(--text-muted);
            font-size: 14px;
            letter-spacing: 2px;
        }

        .footer-links {
            display: flex;
            gap: 30px;
            margin-top: 10px;
        }

        .footer-link {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 14px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .footer-link:hover {
            color: var(--primary);
        }

        .footer-copyright {
            color: var(--text-muted);
            font-size: 12px;
            margin-top: 20px;
            opacity: 0.8;
        }

        @media (max-width: 1024px) {
            .hero {
                flex-direction: column;
                text-align: center;
            }

            .circle-img {
                width: 350px;
                height: 350px;
            }

            .stats-box {
                justify-content: center;
            }

            .hero-left h1 {
                font-size: 50px;
            }

            .search-input {
                width: 180px;
            }

            .search-input:focus {
                width: 220px;
            }
        }

        .max-warning {
            color: var(--warning);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .no-results {
            text-align: center;
            padding: 50px;
            color: var(--text-muted);
            font-size: 18px;
            grid-column: 1 / -1;
        }

        .highlight {
            background-color: var(--primary);
            color: #0f0b07;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
        }

        .scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary);
            color: #0f0b07;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: 0.3s;
            border: none;
            font-size: 20px;
            z-index: 999;
        }

        .scroll-to-top.show {
            opacity: 1;
        }

        .scroll-to-top:hover {
            transform: scale(1.1);
            background: var(--primary-dark);
        }

        .login-required {
            text-align: center;
            padding: 20px;
            background: rgba(245, 179, 66, 0.1);
            border-radius: 12px;
            margin: 20px 0;
        }

        .login-required button {
            background: var(--primary);
            color: #0f0b07;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            margin-top: 10px;
            cursor: pointer;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-button {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 8px;
            color: var(--text-light);
            cursor: pointer;
            font-weight: 600;
        }

        .tab-button.active {
            background: var(--primary);
            color: #0f0b07;
            border-color: var(--primary);
        }

        .form-tab {
            display: none;
        }

        .form-tab.active {
            display: block;
        }

        /* Overlay for closing profile dropdown */
        #profileOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
        }

        #profileOverlay.active {
            display: block;
        }

        .admin-info-box {
            background: rgba(245, 179, 66, 0.07);
            border: 1px solid rgba(245, 179, 66, 0.2);
            border-radius: 10px;
            padding: 12px 16px;
            margin-bottom: 16px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .admin-info-box span {
            color: var(--primary);
            font-weight: 700;
        }

        /* Barcha rasmlarni almashtirish tugmasi stili */
        .mass-image-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            font-size: 14px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .mass-image-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }

        .mass-image-btn i {
            font-size: 18px;
        }

        /* Anti-view source styles */
        .protected-content {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
    </style>
</head>

<body class="protected-content">

    <!-- Profile overlay - yoniga bosish uchun -->
    <div id="profileOverlay" onclick="closeProfileDropdown()"></div>

    <nav>
        <!-- LOGOTIP - CHAP TOMONDA -->
        <div class="logo-container">
            <div class="logo-image">üçΩÔ∏è</div>
            <div class="logo-text">
                <div class="logo-main">Fazo <span>foods</span></div>
                <div class="logo-sub">180+ TAOMLAR</div>
            </div>
        </div>

        <div class="nav-right">
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="" onkeyup="searchProducts()">
                <i class="fas fa-search search-icon" onclick="searchProducts()"></i>
                <i class="fas fa-times clear-search" id="clearSearch" onclick="clearSearch()"></i>
            </div>
            <select onchange="changeLang(this.value)" class="nav-btn">
                <option value="uz">üá∫üáø O'zbek</option>
                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                <option value="en">üá¨üáß English</option>
            </select>
            <div class="nav-btn" onclick="toggleAbout(true)">üìú <span id="navAbout">Biz haqimizda</span></div>
            <div class="nav-btn" onclick="toggleAdminPanel()">‚öúÔ∏è <span id="navAdmin">Admin</span></div>
            <div class="profile-container">
                <div class="profile-icon" onclick="toggleProfileDropdown()" id="profileIcon">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-dropdown" id="profileDropdown"></div>
            </div>
            <div class="cart-icon-btn" onclick="togglePanel('cartPanel')">
                üõí <span id="cartCount">0</span>
            </div>
        </div>
    </nav>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel">
        <div class="admin-header">
            <div class="admin-title"><span>‚öúÔ∏è</span> Admin Panel</div>
            <div class="admin-close" onclick="toggleAdminPanel()">‚úï</div>
        </div>
        <div id="adminLogin" class="admin-login-box">
            <h2>Admin paroli:</h2>
            <input type="password" id="adminPassword" placeholder="Parolni kiriting">
            <button onclick="checkAdminPassword()">OK</button>
        </div>
        <div id="adminContent" style="display: none;">
            <div class="admin-tabs">
                <div class="admin-tab active" onclick="switchAdminTab('dashboard', this)">üìä Dashboard</div>
                <div class="admin-tab" onclick="switchAdminTab('users', this)">üë• Foydalanuvchilar</div>
                <div class="admin-tab" onclick="switchAdminTab('orders', this)">üì¶ Buyurtmalar</div>
                <div class="admin-tab" onclick="switchAdminTab('products', this)">üçΩÔ∏è Mahsulotlar</div>
                <div class="admin-tab" onclick="switchAdminTab('addProduct', this)">‚ûï Yangi mahsulot</div>
                <div class="admin-tab" onclick="logoutAdmin()">üö™ Chiqish</div>
            </div>

            <!-- DASHBOARD -->
            <div id="dashboard" class="admin-content active">
                <h3>Statistika</h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0;">
                    <div style="background: rgba(245,179,66,0.1); padding: 20px; border-radius: 12px;">
                        <div style="font-size: 36px; color: var(--primary);" id="totalOrdersStat">0</div>
                        <div>Jami buyurtmalar</div>
                    </div>
                    <div style="background: rgba(245,179,66,0.1); padding: 20px; border-radius: 12px;">
                        <div style="font-size: 36px; color: var(--primary);" id="totalRevenueStat">0</div>
                        <div>Jami daromad</div>
                    </div>
                    <div style="background: rgba(245,179,66,0.1); padding: 20px; border-radius: 12px;">
                        <div style="font-size: 36px; color: var(--primary);" id="totalProductsStat">0</div>
                        <div>Mahsulotlar</div>
                    </div>
                </div>
                <h3>Oxirgi buyurtmalar</h3>
                <div id="recentOrdersList"></div>
            </div>

            <!-- USERS - OLDINDAN YOZILGAN USERLAR YO'Q -->
            <div id="users" class="admin-content">
                <h3 class="admin-section-title">üë• Foydalanuvchilar boshqaruvi</h3>

                <!-- Yangi foydalanuvchi qo'shish formasi -->
                <div class="add-user-form">
                    <h4>‚ûï Yangi foydalanuvchi qo'shish</h4>
                    <div class="add-user-grid">
                        <input type="text" id="newUserName" placeholder="Ism *">
                        <input type="text" id="newUserSurname" placeholder="Familiya *">
                        <input type="text" id="newUserPhone" value="+998 " oninput="formatPhone(this)"
                            placeholder="+998 90 123 45 67 *">
                        <input type="password" id="newUserPassword" placeholder="Parol (min 4 ta) *">
                        <input type="number" id="newUserMaxOrder" placeholder="Max buyurtma" value="100" min="1"
                            max="1000">
                        <div style="display:flex; align-items:center; gap:8px;">
                            <label style="font-size:13px; color:var(--text-muted);">Admin huquqi:</label>
                            <input type="checkbox" id="newUserIsAdmin"
                                style="width:auto; accent-color: var(--primary);">
                        </div>
                    </div>
                    <button class="add-user-btn" onclick="addNewUser()">‚ûï Qo'shish</button>
                </div>

                <div class="admin-info-box">
                    Admin huquqi berilganlar: <span id="adminCountDisplay">0</span> / 5 ta (maksimal 5 ta admin bo'lishi
                    mumkin)
                </div>

                <table class="users-table" id="usersTable">
                    <thead>
                        <tr>
                            <th>Ism</th>
                            <th>Familiya</th>
                            <th>Telefon</th>
                            <th>Holat</th>
                            <th>Max. buyurtma</th>
                            <th>Amallar</th>
                        </tr>
                    </thead>
                    <tbody id="usersList"></tbody>
                </table>
            </div>

            <!-- ORDERS -->
            <div id="orders" class="admin-content">
                <h3>Barcha buyurtmalar</h3>
                <table class="orders-table">
                    <thead>
                        <tr>
                            <th>Vaqt</th>
                            <th>Mijoz</th>
                            <th>Telefon</th>
                            <th>Manzil</th>
                            <th>Buyurtma</th>
                            <th>Jami</th>
                            <th>Eslatma</th>
                            <th>Amallar</th>
                        </tr>
                    </thead>
                    <tbody id="ordersList"></tbody>
                </table>
            </div>

            <!-- PRODUCTS - BARCHA RASMLARNI ALMASHTIRISH TUGMASI -->
            <div id="products" class="admin-content">
                <h3 class="admin-section-title">üçΩÔ∏è Mahsulotlarni tahrirlash</h3>

                <!-- YANGI TUGMA - Barcha rasmlarni bir vaqtda almashtirish -->
                <button class="mass-image-btn" onclick="changeAllProductImages()">
                    <i class="fas fa-images"></i> Barcha mahsulot rasmlarini almashtirish
                </button>

                <div class="admin-search-container">
                    <input type="text" class="admin-search-input" id="adminSearchInput"
                        placeholder="Mahsulot qidirish..." onkeyup="filterAdminProducts()">
                    <i class="fas fa-search admin-search-icon"></i>
                    <i class="fas fa-times admin-clear-search" id="adminClearSearch" onclick="clearAdminSearch()"></i>
                    <div class="admin-search-stats" id="adminSearchStats" style="display: none;">
                        <span id="adminSearchCount">0</span> ta mahsulot topildi
                    </div>
                </div>
                <div class="products-grid" id="productsGrid"></div>
            </div>

            <!-- ADD PRODUCT -->
            <div id="addProduct" class="admin-content">
                <h3>Yangi mahsulot qo'shish</h3>
                <div style="background: rgba(255,255,255,0.03); padding: 30px; border-radius: 15px; margin-top: 20px;">
                    <div style="margin-bottom: 15px;">
                        <label>Nomi:</label>
                        <input type="text" id="newProductName"
                            style="width: 100%; padding: 12px; background: #2c1e14; border: 1px solid rgba(245,179,66,0.2); border-radius: 8px; color: white; margin-top:5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label>Kategoriya:</label>
                        <select id="newProductCat"
                            style="width: 100%; padding: 12px; background: #2c1e14; border: 1px solid rgba(245,179,66,0.2); border-radius: 8px; color: white; margin-top:5px;">
                            <option value="milliy">O'zbek</option>
                            <option value="osiyo">Osiyo</option>
                            <option value="salat">Salat</option>
                            <option value="kabob">Kabob</option>
                            <option value="gazak">Gazak</option>
                            <option value="ichimlik">Ichimlik</option>
                            <option value="shirinlik">Shirinlik</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label>Narxi (so'm):</label>
                        <input type="number" id="newProductPrice"
                            style="width: 100%; padding: 12px; background: #2c1e14; border: 1px solid rgba(245,179,66,0.2); border-radius: 8px; color: white; margin-top:5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label>Miqdori (gramm/ml):</label>
                        <input type="text" id="newProductWeight" value="300g"
                            style="width: 100%; padding: 12px; background: #2c1e14; border: 1px solid rgba(245,179,66,0.2); border-radius: 8px; color: white; margin-top:5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label>Rasm URL:</label>
                        <input type="text" id="newProductImage"
                            value="https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400"
                            style="width: 100%; padding: 12px; background: #2c1e14; border: 1px solid rgba(245,179,66,0.2); border-radius: 8px; color: white; margin-top:5px;">
                    </div>
                    <button class="save-btn" onclick="addNewProduct()">Mahsulot qo'shish</button>
                </div>
            </div>
        </div>
    </div>

    <div class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </div>

    <section class="hero">
        <div class="hero-left">
            <div class="top-badge"><span class="float-emoji">‚≠ê</span> <span id="badgeText">180+ xil taomlar</span></div>
            <h1 id="heroTitle">Eng katta <br><span>taomlar tanlovi</span></h1>
            <p id="heroDesc">180 dan ortiq turli xil milliy va xorijiy taomlar. Eng sifatli mahsulotlar, eng tez
                yetkazib berish.</p>
            <button class="cta-btn" id="ctaBtn"
                onclick="document.getElementById('menu').scrollIntoView({behavior:'smooth'})">MENYUNI KO'RISH</button>
            <div class="stats-box">
                <div class="stat-item">
                    <h2>180+</h2>
                    <p id="stat1">Taomlar</p>
                </div>
                <div class="stat-item">
                    <h2>3500+</h2>
                    <p id="stat2">Mijozlar</p>
                </div>
                <div class="stat-item">
                    <h2>4.9</h2>
                    <p id="stat3">Reyting</p>
                </div>
            </div>
        </div>
        <div class="hero-right">
            <img src="https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=800"
                class="circle-img animated-image" alt="Professional Salad">
        </div>
    </section>

    <section class="menu-section" id="menu">
        <div class="filter-bar" id="filterBar"></div>
        <div id="searchStats" class="search-stats" style="display: none;">
            <span id="searchResultCount">0</span> <span id="searchResultText">ta mahsulot topildi</span>
        </div>
        <div id="loginRequiredMessage" class="login-required" style="display: none;">
            <p>üîê Buyurtma berish uchun akkauntga kiring</p>
            <button onclick="toggleProfileDropdown()">Akkauntga kirish</button>
        </div>
        <div class="menu-grid" id="menuGrid"></div>
    </section>

    <!-- Cart Panel -->
    <div id="cartPanel" class="side-panel">
        <div style="text-align:right; cursor:pointer; font-size:24px; color:var(--primary);"
            onclick="togglePanel('cartPanel')">‚úï</div>
        <div class="step-indicator">
            <div class="step active" id="step1">1. SAVATCHA</div>
            <div class="step" id="step2">2. RASMIYLASHTIRISH</div>
        </div>
        <div id="cartView">
            <h2 id="cartTitle">Savatcha</h2>
            <div id="cartList" style="flex:1; overflow-y:auto; margin:20px 0;"></div>
            <p style="font-size:20px;"><span id="totalLabel">JAMI:</span> <b id="totalPrice">0</b> <span
                    class="currency">so'm</span></p>
            <div id="maxWarning" class="max-warning">‚ö†Ô∏è Maksimal mahsulot chegarasiga yetdingiz!</div>
            <button class="cta-btn" style="width:100%;" onclick="showCheckout()" id="checkoutBtn">BUYURTMA
                BERISH</button>
        </div>
        <div id="checkoutView" style="display: none;">
            <button class="back-btn" onclick="showCart()">‚Üê Savatchaga qaytish</button>
            <h2>Rasmiylashtirish</h2>
            <div class="order-summary" id="checkoutSummary"></div>
            <div class="checkout-form">
                <div class="form-group">
                    <label>Ismingiz *</label>
                    <input type="text" id="nameInput" placeholder="Ismingizni kiriting" readonly>
                    <div class="error-message" id="nameError">Iltimos, ismingizni kiriting</div>
                </div>
                <div class="form-group">
                    <label>Familiya *</label>
                    <input type="text" id="surnameInput" placeholder="Familiyangizni kiriting" readonly>
                    <div class="error-message" id="surnameError">Iltimos, familiyangizni kiriting</div>
                </div>
                <div class="form-group">
                    <label>Telefon raqam *</label>
                    <input type="tel" id="phoneInput" placeholder="+998 90 123 45 67" readonly>
                    <div class="error-message" id="phoneError">Telefon raqam noto'g'ri formatda</div>
                </div>
                <div class="form-group">
                    <label>Manzil *</label>
                    <textarea id="addressInput" placeholder="To'liq manzilingizni kiriting" rows="3"></textarea>
                    <div class="error-message" id="addressError">Iltimos, manzilingizni kiriting</div>
                </div>
                <div class="form-group">
                    <label>Eslatma (ixtiyoriy)</label>
                    <textarea id="noteInput" placeholder="Buyurtmangiz haqida qo'shimcha ma'lumot" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label>Promokod</label>
                    <input type="text" id="promoInput" placeholder="Promokod kiriting">
                    <div id="promoMessage" style="color: var(--text-muted); font-size: 12px;"></div>
                </div>
            </div>
            <button class="cta-btn" style="width:100%; margin-top:20px;" onclick="submitOrder()"
                id="submitOrderBtn">BUYURTMANI YAKUNLASH</button>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal">
        <div class="about-box">
            <h2 id="aboutTitle">Biz haqimizda</h2>
            <div style="text-align: left; margin: 30px 0;">
                <p style="font-size: 26px; color: var(--primary);" id="aboutText1">Fazo foods ‚Äî 2025</p>
                <div style="margin: 30px 0;">
                    <p>üìç <span id="aboutLocation">Namangan, O'zbekiston</span></p>
                    <p>üìû <span id="aboutPhone">+998 90 260 88 88</span></p>
                    <p>üì± <span id="aboutTG">@ItsUzb</span></p>
                </div>
                <p>‚úçÔ∏è <span id="aboutName">Odilov Abdulquddus (13 yosh)</span></p>
            </div>
            <button class="cta-btn" style="width:100%;" onclick="toggleAbout(false)">YOPISH</button>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-text">Fazo Family Restaurant ¬© 2025</div>
            <div class="footer-links">
                <a href="https://t.me/ItsUzb" target="_blank" class="footer-link">üì± Telegram</a>
                <a href="https://instagram.com" target="_blank" class="footer-link">üì∑ Instagram</a>
            </div>
            <div class="footer-copyright">Barcha huquqlar himoyalangan ¬© 2025</div>
        </div>
    </footer>

    <script>
        const langData = {
            uz: { navAbout: "Biz haqimizda", navAdmin: "Admin", badgeText: "180+ xil taomlar", heroTitle: "Eng katta <br><span>taomlar tanlovi</span>", heroDesc: "180 dan ortiq turli xil milliy va xorijiy taomlar. Eng sifatli mahsulotlar, eng tez yetkazib berish.", ctaBtn: "MENYUNI KO'RISH", stat1: "Taomlar", stat2: "Mijozlar", stat3: "Reyting", all: "BARCHASI", milliy: "O'ZBEK", osiyo: "OSIYO", salat: "SALATLAR", kabob: "KABOBLAR", gazak: "GAZAKLAR", ichimlik: "ICHIMLIKLAR", shirinlik: "SHIRINLIKLAR", cartTitle: "Savatcha", totalLabel: "JAMI:", currency: "so'm", aboutTitle: "Biz haqimizda", aboutClose: "YOPISH", aboutText1: "Fazo foods ‚Äî 2025", aboutLocation: "Namangan, O'zbekiston", aboutPhone: "+998 90 260 88 88", aboutTG: "@ItsUzb", aboutName: "Odilov Abdulquddus (13 yosh)", searchPlaceholder: "Qidiruv...", searchResults: "ta mahsulot topildi", noResults: "Hech narsa topilmadi" },
            ru: { navAbout: "–û –Ω–∞—Å", navAdmin: "–ê–¥–º–∏–Ω", badgeText: "180+ –±–ª—é–¥", heroTitle: "–ë–æ–ª—å—à–æ–π <br><span>–≤—ã–±–æ—Ä –±–ª—é–¥</span>", heroDesc: "–ë–æ–ª–µ–µ 180 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±–ª—é–¥. –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –±—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞.", ctaBtn: "–ú–ï–ù–Æ", stat1: "–ë–ª—é–¥–∞", stat2: "–ö–ª–∏–µ–Ω—Ç—ã", stat3: "–†–µ–π—Ç–∏–Ω–≥", all: "–í–°–ï", milliy: "–£–ó–ë–ï–ö–°–ö–ò–ï", osiyo: "–ê–ó–ò–ê–¢–°–ö–ò–ï", salat: "–°–ê–õ–ê–¢–´", kabob: "–®–ê–®–õ–´–ö–ò", gazak: "–ó–ê–ö–£–°–ö–ò", ichimlik: "–ù–ê–ü–ò–¢–ö–ò", shirinlik: "–î–ï–°–ï–†–¢–´", cartTitle: "–ö–æ—Ä–∑–∏–Ω–∞", totalLabel: "–ò–¢–û–ì–û:", currency: "—Å—É–º", aboutTitle: "–û –Ω–∞—Å", aboutClose: "–ó–ê–ö–†–´–¢–¨", aboutText1: "Fazo foods ‚Äî 2025", aboutLocation: "–ù–∞–º–∞–Ω–≥–∞–Ω, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω", aboutPhone: "+998 90 260 88 88", aboutTG: "@ItsUzb", aboutName: "–û–¥–∏–ª–æ–≤ –ê–±–¥—É–ª–∫—É–¥–¥—É—Å (13 –ª–µ—Ç)", searchPlaceholder: "–ü–æ–∏—Å–∫...", searchResults: "—Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞–π–¥–µ–Ω–æ", noResults: "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" },
            en: { navAbout: "About Us", navAdmin: "Admin", badgeText: "180+ dishes", heroTitle: "Largest <br><span>food selection</span>", heroDesc: "More than 180 different dishes. Quality products, fast delivery.", ctaBtn: "VIEW MENU", stat1: "Dishes", stat2: "Customers", stat3: "Rating", all: "ALL", milliy: "UZBEK", osiyo: "ASIAN", salat: "SALADS", kabob: "KABOBS", gazak: "SNACKS", ichimlik: "DRINKS", shirinlik: "DESSERTS", cartTitle: "Cart", totalLabel: "TOTAL:", currency: "sum", aboutTitle: "About Us", aboutClose: "CLOSE", aboutText1: "Fazo foods ‚Äî 2025", aboutLocation: "Namangan, Uzbekistan", aboutPhone: "+998 90 260 88 88", aboutTG: "@ItsUzb", aboutName: "Odilov Abdulquddus (13 years old)", searchPlaceholder: "Search...", searchResults: "products found", noResults: "No results found" }
        };

        // MAHSULOTLAR
        const products = [];
        const uzbekNames = ["Toshkent Palovi", "Samarqand Palovi", "Buxoro Palovi", "Xorazm Palovi", "Farg'ona Palovi", "Andijon Palovi", "Namangan Palovi", "Qashqadaryo Palovi", "Surxondaryo Palovi", "Jizzax Palovi", "Tandir Somsa", "Qozon Somsa", "Manti", "Chuchvara", "Sho'rva", "Lag'mon", "Qovurma Lag'mon", "Norin", "Mastava", "Shovla", "Dimlama", "Qozon Kabob", "Kabob", "Jiz-biz", "Xonim", "Osh", "Hasip", "Qazi", "Qurtob", "Sumalak", "Halim", "Ugra", "Piyoz", "Samsa", "Beshbarmak", "Kesma", "Nisholda", "Holvaytar", "Tuxum Barak", "Kuk Somsa"];
        for (let i = 0; i < 40; i++) products.push({ id: `uz${i}`, cat: 'milliy', name: { uz: uzbekNames[i], ru: uzbekNames[i], en: uzbekNames[i] }, price: 18000 + (i * 1000), weight: "350g", img: "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400", quantity: 0 });
        const kebabNames = ["Andijon Kabobi", "Qozon Kabob", "Jiz-biz", "Tovuq Kabob", "Qiyma Kabob", "Jigar Kabob", "Qo'y Kabob", "Mol Kabob", "Baliq Kabob", "Sabzavot Kabob", "Lula Kabob", "Shashlik", "Tandir Kabob", "Mango Kabob", "Ananas Kabob", "Qo'zi Kabob", "Kurka Kabob", "Tuxum Kabob", "Pishloq Kabob", "Qo'ziqorin Kabob", "Deniz Kabob", "Adana Kabob", "Urfa Kabob", "Shish Kabob", "Doner Kabob"];
        for (let i = 0; i < 25; i++) products.push({ id: `kab${i}`, cat: 'kabob', name: { uz: kebabNames[i], ru: kebabNames[i], en: kebabNames[i] }, price: 25000 + (i * 1500), weight: "250g", img: "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400", quantity: 0 });
        const saladNames = ["Achchiq-chuchuk", "Sezar Salat", "Grechka Salat", "Olivier", "Mimoza", "Kapriz Salat", "Seld pod Shuboy", "Vinegret", "Taze Salat", "Cobb Salat", "Greek Salat", "Tabouleh", "Fattoush", "Coleslaw", "Waldorf Salat", "Nisoaz Salat", "Panzanella", "Caprese", "Salat Olivier", "Salat Vitamin", "Salat Bahor", "Salat Yoz", "Salat Kuz", "Salat Qish", "Salat Sho'r"];
        for (let i = 0; i < 25; i++) products.push({ id: `sal${i}`, cat: 'salat', name: { uz: saladNames[i], ru: saladNames[i], en: saladNames[i] }, price: 12000 + (i * 800), weight: "200g", img: "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400", quantity: 0 });
        const snackNames = ["Oq non", "Javdar non", "Kulcha", "Patir", "Lochira", "Baget", "Croissant", "Bublik", "Simit", "Lavash", "Tortilya", "Chapati", "Naan", "Pita", "Focaccia", "Bretzel", "Bagel", "Syrnik", "Vatrushka", "Pirojok", "Samsa", "G√∂zn√¢k", "Qatlama", "Yupqa", "Qalpoq"];
        for (let i = 0; i < 25; i++) products.push({ id: `gaz${i}`, cat: 'gazak', name: { uz: snackNames[i], ru: snackNames[i], en: snackNames[i] }, price: 5000 + (i * 500), weight: "150g", img: "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400", quantity: 0 });
        const drinkNames = ["Coca Cola", "Pepsi", "Fanta", "Sprite", "Mirinda", "Chortoq suvi", "Ko'l suvi", "Tashkent suvi", "Nestle suvi", "Bon Aqua", "Olma sharbati", "Uzum sharbati", "Anor sharbati", "Shaftoli sharbati", "O'rik sharbati", "Behi sharbati", "Nok sharbati", "Gilos sharbati", "Qulupnay sharbati", "Malina sharbati", "Apelsin sharbati", "Limon sharbati", "Mandarin sharbati", "Ananas sharbati", "Kivi sharbati", "Banana sharbati", "Mango sharbati", "Papaya sharbati", "Guvak sharbati", "Sabzi sharbati", "Choy", "Qora choy", "Ko'k choy", "Limonli choy", "Asalli choy", "Qahva", "Kapuchino", "LATTE", "Mokkachino", "Raf"];
        for (let i = 0; i < 40; i++) products.push({ id: `ich${i}`, cat: 'ichimlik', name: { uz: drinkNames[i], ru: drinkNames[i], en: drinkNames[i] }, price: 8000 + (i * 500), weight: "500ml", img: "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400", quantity: 0 });
        const dessertNames = ["Medovik", "Napoleon", "Tiramisu", "Cheesecake", "Chak-chak", "Halva", "Paxlava", "Shokoladli tort", "Muzqaymoq", "Fruit Salat", "Blinchik", "Puding", "Sufle", "Jele", "Pechenye", "Ekler", "Profiterol", "Makaron", "Keks", "Rul", "Donat", "Kruassan", "Briosh", "Panakota", "Krem-brule", "Shokolad", "Konfet", "Karamel", "Zefir", "Pastila"];
        for (let i = 0; i < 30; i++) products.push({ id: `shir${i}`, cat: 'shirinlik', name: { uz: dessertNames[i], ru: dessertNames[i], en: dessertNames[i] }, price: 15000 + (i * 1000), weight: "200g", img: "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400", quantity: 0 });

        // STATE - USERLAR BO'SH (OLDINDAN YOZILGAN USERLAR YO'Q)
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let users = JSON.parse(localStorage.getItem('users')) || []; // BO'SH ARRAY

        // Agar users bo'sh bo'lsa, hech narsa qo'shmaymiz
        // users = []; - Bu holatda hech qanday default user yo'q

        let currentLang = 'uz', cart = [], currentStep = 'cart';
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let isAdminLoggedIn = false, currentCategory = 'all', searchQuery = '', adminSearchQuery = '';
        const TELEGRAM_TOKEN = "8227938686:AAGYtIXGoLT2N3mOUdd_lsy-sF4lZnNSD44";
        const TELEGRAM_CHAT_ID = "7000999171";

        // ========================
        // BARCHA RASMLARNI ALMASHTIRISH FUNKSIYASI
        // ========================
        function changeAllProductImages() {
            const newUrl = prompt("Yangi rasm URL manzilini kiriting (barcha mahsulotlar uchun):",
                "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400");

            if (newUrl && newUrl.trim() !== "") {
                // Barcha mahsulotlarning rasmini almashtirish
                products.forEach(product => {
                    product.img = newUrl.trim();
                });

                // Asosiy menyuni yangilash
                displayProducts(currentCategory);

                // Agar admin panelida products tab ochiq bo'lsa, uni ham yangilash
                if (document.getElementById('products').classList.contains('active')) {
                    displayProductsForEdit();
                }

                alert(`‚úÖ Barcha ${products.length} ta mahsulot rasmi muvaffaqiyatli almashtirildi!`);
            }
        }

        // ========================
        // YAXSHILANGAN LOGOUT FUNKSIYASI
        // ========================
        function logoutUser() {
            // 1. Current userni null qilish
            currentUser = null;

            // 2. localStorage dan o'chirish
            localStorage.removeItem('currentUser');

            // 3. Barcha mahsulotlar quantity ni 0 ga tushurish
            products.forEach(p => p.quantity = 0);

            // 4. Savatchani tozalash
            cart = [];

            // 5. Cart ni yangilash
            updateCart();

            // 6. Profil dropdown ni yangilash
            updateProfileDropdown();

            // 7. Mahsulotlarni qayta chiqarish
            displayProducts(currentCategory);

            // 8. Profil dropdown ni yopish
            closeProfileDropdown();

            // 9. Login required xabarni yangilash
            updateLoginRequiredMessage();

            // 10. Checkout formani tozalash
            document.getElementById('nameInput').value = '';
            document.getElementById('surnameInput').value = '';
            document.getElementById('phoneInput').value = '+998 ';

            // 11. Agar cart panel ochiq bo'lsa, uni yopish
            if (document.getElementById('cartPanel').classList.contains('active')) {
                togglePanel('cartPanel');
            }

            alert("‚úÖ Tizimdan muvaffaqiyatli chiqdingiz!");
        }

        // ========================
        // PROFILE DROPDOWN
        // ========================
        function createProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.innerHTML = `
        <div class="profile-dropdown-header">
            <span style="font-weight:700; color:var(--primary); font-size:15px;">üë§ Profil</span>
            <button class="profile-dropdown-close" onclick="closeProfileDropdown()">‚úï</button>
        </div>
        <div id="profileNotLoggedIn">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchAuthTab('login')">Kirish</button>
                <button class="tab-button" onclick="switchAuthTab('register')">Ro'yxatdan o'tish</button>
            </div>
            <div id="loginForm" class="form-tab active">
                <h4 style="color:var(--primary);margin-bottom:15px;">Tizimga kirish</h4>
                <div class="profile-field"><label>Telefon</label><input type="text" id="loginPhone" value="+998 " oninput="formatPhone(this)" placeholder="+998 90 123 45 67"></div>
                <div class="profile-field"><label>Parol</label><input type="password" id="loginPassword" placeholder="Parol"></div>
                <button class="save-profile-btn" onclick="loginUser()">Kirish</button>
            </div>
            <div id="registerForm" class="form-tab">
                <h4 style="color:var(--primary);margin-bottom:15px;">Ro'yxatdan o'tish</h4>
                <div class="profile-field"><label>Ism</label><input type="text" id="regName" placeholder="Ismingiz"></div>
                <div class="profile-field"><label>Familiya</label><input type="text" id="regSurname" placeholder="Familiyangiz"></div>
                <div class="profile-field"><label>Telefon</label><input type="text" id="regPhone" value="+998 " oninput="formatPhone(this)" placeholder="+998 90 123 45 67"></div>
                <div class="profile-field"><label>Parol</label><input type="password" id="regPassword" placeholder="Parol"></div>
                <div class="profile-field"><label>Parolni takrorlang</label><input type="password" id="regConfirmPassword" placeholder="Parolni takrorlang"></div>
                <button class="save-profile-btn" onclick="registerUser()">Ro'yxatdan o'tish</button>
            </div>
        </div>
        <div id="profileLoggedIn" style="display:none;">
            <div class="profile-header">
                <div class="profile-avatar" onclick="changeProfilePicture()"><img id="profileAvatar" src="https://via.placeholder.com/60" alt="Avatar"></div>
                <div class="profile-info">
                    <h4 id="profileFullName">Ism Familiya</h4>
                    <p id="profilePhoneDisplay">+998 ** *** ** **</p>
                    <p id="profileStatus" style="font-size:12px; margin-top:4px;"></p>
                </div>
            </div>
            <div class="profile-field"><label>Ism</label><input type="text" id="profileNameInput" value=""></div>
            <div class="profile-field"><label>Familiya</label><input type="text" id="profileSurnameInput" value=""></div>
            <div class="profile-field"><label>Telefon</label><input type="text" id="profilePhoneInput" value="" readonly></div>
            <button class="save-profile-btn" onclick="updateProfile()">Saqlash</button>
            <button class="logout-btn" onclick="logoutUser()">Chiqish</button>
        </div>
    `;
        }

        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            const overlay = document.getElementById('profileOverlay');
            const isOpen = dropdown.classList.contains('active');
            if (isOpen) {
                closeProfileDropdown();
            } else {
                dropdown.classList.add('active');
                overlay.classList.add('active');
                updateProfileDropdown();
            }
        }

        function closeProfileDropdown() {
            document.getElementById('profileDropdown').classList.remove('active');
            document.getElementById('profileOverlay').classList.remove('active');
        }

        function switchAuthTab(tab) {
            document.querySelectorAll('#profileDropdown .tab-button').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('#profileDropdown .form-tab').forEach(f => f.classList.remove('active'));
            if (tab === 'login') {
                document.querySelectorAll('#profileDropdown .tab-button')[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelectorAll('#profileDropdown .tab-button')[1].classList.add('active');
                document.getElementById('registerForm').classList.add('active');
            }
        }

        function loginUser() {
            const phone = document.getElementById('loginPhone').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            if (!phone.startsWith('+998')) { alert("Telefon raqam +998 bilan boshlanishi kerak!"); return; }
            if (!password) { alert("Parolni kiriting!"); return; }
            const user = users.find(u => u.phone === phone && u.password === password);
            if (!user) { alert("Telefon raqam yoki parol noto'g'ri!"); return; }
            if (user.blocked) { alert("Sizning akkauntingiz bloklangan! Iltimos, admin bilan bog'laning."); return; }
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateProfileDropdown();
            updateCheckoutForm();
            displayProducts(currentCategory);
            closeProfileDropdown();
            alert("‚úÖ Tizimga muvaffaqiyatli kirdingiz!");
        }

        function registerUser() {
            const name = document.getElementById('regName').value.trim();
            const surname = document.getElementById('regSurname').value.trim();
            const phone = document.getElementById('regPhone').value.trim();
            const password = document.getElementById('regPassword').value.trim();
            const confirmPassword = document.getElementById('regConfirmPassword').value.trim();
            if (!name || !surname) { alert("Ism va familiyani kiriting!"); return; }
            if (!phone.startsWith('+998')) { alert("Telefon raqam +998 bilan boshlanishi kerak!"); return; }
            if (phone.length < 16) { alert("Telefon raqam to'liq emas!"); return; }
            if (!password || password.length < 4) { alert("Parol kamida 4 belgidan iborat bo'lishi kerak!"); return; }
            if (password !== confirmPassword) { alert("Parollar mos kelmadi!"); return; }
            if (users.some(u => u.phone === phone)) { alert("Bu telefon raqam bilan avval ro'yxatdan o'tilgan!"); return; }
            const newUser = { id: Date.now(), name, surname, phone, password, avatar: "https://via.placeholder.com/60", blocked: false, maxOrder: 100, isAdmin: false, registered: new Date().toISOString() };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateProfileDropdown();
            updateCheckoutForm();
            displayProducts(currentCategory);
            closeProfileDropdown();
            alert("‚úÖ Ro'yxatdan muvaffaqiyatli o'tdingiz!");
        }

        function updateProfileDropdown() {
            const notLoggedIn = document.getElementById('profileNotLoggedIn');
            const loggedIn = document.getElementById('profileLoggedIn');
            const profileIcon = document.getElementById('profileIcon');
            if (!notLoggedIn || !loggedIn) { createProfileDropdown(); return; }
            if (currentUser) {
                notLoggedIn.style.display = 'none';
                loggedIn.style.display = 'block';
                const userData = users.find(u => u.id === currentUser.id) || currentUser;
                document.getElementById('profileFullName').innerText = `${userData.name} ${userData.surname}`;
                document.getElementById('profilePhoneDisplay').innerText = userData.phone;
                document.getElementById('profileNameInput').value = userData.name;
                document.getElementById('profileSurnameInput').value = userData.surname;
                document.getElementById('profilePhoneInput').value = userData.phone;
                const statusEl = document.getElementById('profileStatus');
                let statusHtml = '';
                if (userData.blocked) statusHtml = '<span class="badge badge-danger">Bloklangan</span>';
                else if (userData.isAdmin) statusHtml = '<span class="badge badge-admin">‚öúÔ∏è Admin</span>';
                else statusHtml = `<span class="badge badge-success">Max: ${userData.maxOrder} ta</span>`;
                statusEl.innerHTML = statusHtml;
                if (userData.avatar) {
                    document.getElementById('profileAvatar').src = userData.avatar;
                    profileIcon.innerHTML = `<img src="${userData.avatar}" alt="Avatar" style="width:100%;height:100%;object-fit:cover;">`;
                } else {
                    profileIcon.innerHTML = '<i class="fas fa-user"></i>';
                }
            } else {
                notLoggedIn.style.display = 'block';
                loggedIn.style.display = 'none';
                profileIcon.innerHTML = '<i class="fas fa-user"></i>';
            }
            updateLoginRequiredMessage();
        }

        function changeProfilePicture() {
            if (!currentUser) return;
            const url = prompt("Rasm URL manzilini kiriting:", currentUser.avatar || "https://via.placeholder.com/60");
            if (url) {
                currentUser.avatar = url;
                const idx = users.findIndex(u => u.id === currentUser.id);
                if (idx !== -1) { users[idx].avatar = url; localStorage.setItem('users', JSON.stringify(users)); }
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateProfileDropdown();
            }
        }

        function updateProfile() {
            if (!currentUser) return;
            const name = document.getElementById('profileNameInput').value.trim();
            const surname = document.getElementById('profileSurnameInput').value.trim();
            if (!name || !surname) { alert("Ism va familiyani kiriting!"); return; }
            currentUser.name = name; currentUser.surname = surname;
            const idx = users.findIndex(u => u.id === currentUser.id);
            if (idx !== -1) { users[idx].name = name; users[idx].surname = surname; localStorage.setItem('users', JSON.stringify(users)); }
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateProfileDropdown();
            alert("‚úÖ Profil ma'lumotlari saqlandi!");
        }

        function updateCheckoutForm() {
            if (currentUser) {
                document.getElementById('nameInput').value = currentUser.name || '';
                document.getElementById('surnameInput').value = currentUser.surname || '';
                document.getElementById('phoneInput').value = currentUser.phone || '+998 ';
            } else {
                document.getElementById('nameInput').value = '';
                document.getElementById('surnameInput').value = '';
                document.getElementById('phoneInput').value = '+998 ';
            }
        }

        function updateLoginRequiredMessage() {
            const messageDiv = document.getElementById('loginRequiredMessage');
            const checkoutBtn = document.getElementById('checkoutBtn');
            if (!currentUser) { messageDiv.style.display = 'block'; checkoutBtn.disabled = true; }
            else {
                const userData = users.find(u => u.id === currentUser.id);
                if (userData && userData.blocked) {
                    messageDiv.style.display = 'block';
                    messageDiv.innerHTML = '<p>üîí Sizning akkauntingiz bloklangan! Admin bilan bog\'laning.</p>';
                    checkoutBtn.disabled = true;
                } else {
                    messageDiv.style.display = 'none';
                    checkoutBtn.disabled = false;
                }
            }
        }

        function formatPhone(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length === 0) { input.value = '+998 '; return; }
            if (!value.startsWith('998')) value = '998' + value;
            if (value.length > 12) value = value.slice(0, 12);
            let formatted = '+998 ';
            if (value.length > 3) {
                formatted += value.slice(3, 5);
                if (value.length > 5) {
                    formatted += ' ' + value.slice(5, 8);
                    if (value.length > 8) {
                        formatted += ' ' + value.slice(8, 10);
                        if (value.length > 10) formatted += ' ' + value.slice(10, 12);
                    }
                }
            }
            input.value = formatted;
        }

        // ========================
        // ADMIN USERS
        // ========================
        function getAdminCount() {
            return users.filter(u => u.isAdmin).length;
        }

        function addNewUser() {
            const name = document.getElementById('newUserName').value.trim();
            const surname = document.getElementById('newUserSurname').value.trim();
            const phone = document.getElementById('newUserPhone').value.trim();
            const password = document.getElementById('newUserPassword').value.trim();
            const maxOrder = parseInt(document.getElementById('newUserMaxOrder').value) || 100;
            const isAdmin = document.getElementById('newUserIsAdmin').checked;

            if (!name || !surname) { alert("‚ùå Ism va familiyani kiriting!"); return; }
            if (!phone.startsWith('+998') || phone.length < 16) { alert("‚ùå To'g'ri telefon kiriting!"); return; }
            if (!password || password.length < 4) { alert("‚ùå Parol kamida 4 ta belgi bo'lishi kerak!"); return; }
            if (users.some(u => u.phone === phone)) { alert("‚ùå Bu telefon allaqachon ro'yxatda bor!"); return; }

            if (isAdmin && getAdminCount() >= 5) {
                alert("‚ùå Maksimal 5 ta admin bo'lishi mumkin! Avval birini admin huquqidan mahrum qiling.");
                return;
            }

            const newUser = { id: Date.now(), name, surname, phone, password, avatar: "https://via.placeholder.com/60", blocked: false, maxOrder, isAdmin, registered: new Date().toLocaleString('uz-UZ') };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));

            document.getElementById('newUserName').value = '';
            document.getElementById('newUserSurname').value = '';
            document.getElementById('newUserPhone').value = '+998 ';
            document.getElementById('newUserPassword').value = '';
            document.getElementById('newUserMaxOrder').value = '100';
            document.getElementById('newUserIsAdmin').checked = false;

            displayUsers();
            alert(`‚úÖ Foydalanuvchi qo'shildi: ${name} ${surname}`);
        }

        function deleteUser(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) { return; }
            if (!confirm(`"${user.name} ${user.surname}" ni o'chirmoqchimisiz?`)) return;
            if (currentUser && currentUser.id === userId) {
                alert("Siz o'zingizni o'chira olmaysiz!"); return;
            }
            users = users.filter(u => u.id !== userId);
            localStorage.setItem('users', JSON.stringify(users));
            displayUsers();
            alert("‚úÖ Foydalanuvchi o'chirildi!");
        }

        function toggleUserBlock(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                user.blocked = !user.blocked;
                localStorage.setItem('users', JSON.stringify(users));
                if (currentUser && currentUser.id === userId) {
                    currentUser.blocked = user.blocked;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    updateLoginRequiredMessage();
                    displayProducts(currentCategory);
                }
                displayUsers();
                alert(`Foydalanuvchi ${user.blocked ? 'bloklandi' : 'blokdan ochildi'}`);
            }
        }

        function toggleAdminRole(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;
            if (!user.isAdmin) {
                if (getAdminCount() >= 5) { alert("‚ùå Maksimal 5 ta admin bo'lishi mumkin!"); return; }
                if (!confirm(`"${user.name} ${user.surname}" ga admin huquqi berilsinmi?`)) return;
                user.isAdmin = true;
                alert(`‚úÖ ${user.name} admin qilindi!`);
            } else {
                if (!confirm(`"${user.name} ${user.surname}" dan admin huquqi olinsinmi?`)) return;
                user.isAdmin = false;
                alert(`‚úÖ ${user.name} dan admin huquqi olindi!`);
            }
            localStorage.setItem('users', JSON.stringify(users));
            if (currentUser && currentUser.id === userId) {
                currentUser.isAdmin = user.isAdmin;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateProfileDropdown();
            }
            displayUsers();
        }

        function updateMaxOrder(userId) {
            const input = document.getElementById(`max-${userId}`);
            const value = parseInt(input.value);
            if (isNaN(value) || value < 1) { alert("To'g'ri qiymat kiriting (1-1000)"); return; }
            const user = users.find(u => u.id === userId);
            if (user) {
                user.maxOrder = value;
                localStorage.setItem('users', JSON.stringify(users));
                if (currentUser && currentUser.id === userId) { currentUser.maxOrder = value; localStorage.setItem('currentUser', JSON.stringify(currentUser)); }
                alert(`Maksimal buyurtma miqdori ${value} ga o'zgartirildi`);
            }
        }

        function displayUsers() {
            const list = document.getElementById('usersList');
            const adminCount = getAdminCount();
            document.getElementById('adminCountDisplay').innerText = adminCount;
            let html = '';
            if (users.length === 0) {
                html = `<tr><td colspan="6" style="text-align: center; padding: 30px; color: var(--text-muted);">üë• Hozircha hech qanday foydalanuvchi yo'q</td></tr>`;
            } else {
                users.forEach(u => {
                    html += `<tr class="${u.blocked ? 'blocked' : ''}">
                <td>${u.name}</td>
                <td>${u.surname}</td>
                <td style="font-size:12px;">${u.phone}</td>
                <td>
                    ${u.blocked ? '<span class="badge badge-danger">Bloklangan</span>' : u.isAdmin ? '<span class="badge badge-admin">‚öúÔ∏è Admin</span>' : '<span class="badge badge-success">Faol</span>'}
                </td>
                <td>
                    <input type="number" class="max-order-input" id="max-${u.id}" value="${u.maxOrder || 100}" min="1" max="1000">
                    <button class="update-max-btn" onclick="updateMaxOrder(${u.id})">‚úì</button>
                </td>
                <td style="white-space:nowrap;">
                    ${u.blocked ? `<button class="unblock-btn" onclick="toggleUserBlock(${u.id})">Ochish</button>` : `<button class="block-btn" onclick="toggleUserBlock(${u.id})">Bloklash</button>`}
                    ${u.isAdmin ? `<button class="remove-admin-btn" onclick="toggleAdminRole(${u.id})">Admin olish</button>` : `<button class="make-admin-btn" onclick="toggleAdminRole(${u.id})">Admin qilish</button>`}
                    <button class="delete-user-btn" onclick="deleteUser(${u.id})">üóë</button>
                </td>
            </tr>`;
                });
            }
            list.innerHTML = html;
        }

        // ========================
        // PRODUCTS DISPLAY
        // ========================
        function searchProducts() {
            const searchInput = document.getElementById('searchInput');
            const clearBtn = document.getElementById('clearSearch');
            searchQuery = searchInput.value.toLowerCase().trim();
            clearBtn.style.display = searchQuery.length > 0 ? 'block' : 'none';
            document.getElementById('searchStats').style.display = searchQuery.length > 0 ? 'block' : 'none';
            displayProducts(currentCategory);
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            searchQuery = '';
            document.getElementById('clearSearch').style.display = 'none';
            document.getElementById('searchStats').style.display = 'none';
            displayProducts(currentCategory);
        }

        function displayProducts(category = 'all') {
            currentCategory = category;
            const grid = document.getElementById('menuGrid');
            grid.innerHTML = '';
            let filtered = category === 'all' ? products : products.filter(p => p.cat === category);
            if (searchQuery.length > 0) filtered = filtered.filter(p => (p.name[currentLang] || p.name.uz).toLowerCase().includes(searchQuery));

            if (searchQuery.length > 0) {
                document.getElementById('searchResultCount').innerText = filtered.length;
                document.getElementById('searchResultText').innerText = ` ${langData[currentLang].searchResults}`;
                if (filtered.length === 0) { grid.innerHTML = `<div class="no-results">üîç ${langData[currentLang].noResults}</div>`; return; }
            }

            let isBlocked = false, maxOrder = 100;
            if (currentUser) {
                const userData = users.find(u => u.id === currentUser.id);
                if (userData) { isBlocked = userData.blocked || false; maxOrder = userData.maxOrder || 100; }
            }

            filtered.forEach(p => {
                const currentName = p.name[currentLang] || p.name.uz;
                let displayName = currentName;
                if (searchQuery.length > 0) {
                    const regex = new RegExp(`(${searchQuery})`, 'gi');
                    displayName = currentName.replace(regex, '<span class="highlight">$1</span>');
                }
                grid.innerHTML += `<div class="card ${isBlocked ? 'blocked' : ''}" id="card-${p.id}">
            <button class="goto-btn" onclick="goToProduct('${p.id}')" title="Mahsulotga o'tish"><i class="fas fa-arrow-right"></i></button>
            <img src="${p.img}" onerror="this.src='https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400'">
            <h3>${displayName}</h3>
            <div class="product-weight">${p.weight}</div>
            <div class="price">${p.price.toLocaleString()} ${langData[currentLang].currency}</div>
            <div class="quantity-controls">
                <button class="qty-btn minus" onclick="decreaseQuantity('${p.id}')" ${isBlocked ? 'disabled' : ''}>‚àí</button>
                <span class="qty-value" id="qty-${p.id}">${p.quantity}</span>
                <button class="qty-btn plus" onclick="increaseQuantity('${p.id}')" ${isBlocked ? 'disabled' : ''}>+</button>
            </div>
        </div>`;
            });
        }

        function increaseQuantity(productId) {
            if (!currentUser) { alert("Buyurtma berish uchun avval akkauntga kiring!"); toggleProfileDropdown(); return; }
            const userData = users.find(u => u.id === currentUser.id);
            if (userData && userData.blocked) { alert("Sizning akkauntingiz bloklangan!"); return; }
            const product = products.find(p => p.id === productId);
            if (product) {
                const currentTotal = cart.reduce((sum, item) => sum + item.quantity, 0);
                const maxOrder = userData?.maxOrder || 100;
                if (currentTotal >= maxOrder) {
                    const w = document.getElementById('maxWarning');
                    w.style.display = 'block';
                    w.innerHTML = `‚ö†Ô∏è Maksimal ${maxOrder} ta mahsulot buyurtma qilishingiz mumkin!`;
                    setTimeout(() => w.style.display = 'none', 3000);
                    return;
                }
                product.quantity++;
                document.getElementById(`qty-${productId}`).textContent = product.quantity;
                const cartItem = cart.find(item => item.id === productId);
                if (cartItem) cartItem.quantity = product.quantity;
                else cart.push({ id: product.id, name: product.name, price: product.price, weight: product.weight, quantity: product.quantity });
                updateCart();
            }
        }

        function decreaseQuantity(productId) {
            const product = products.find(p => p.id === productId);
            if (product && product.quantity > 0) {
                product.quantity--;
                document.getElementById(`qty-${productId}`).textContent = product.quantity;
                const cartIndex = cart.findIndex(item => item.id === productId);
                if (cartIndex !== -1) {
                    if (product.quantity === 0) cart.splice(cartIndex, 1);
                    else cart[cartIndex].quantity = product.quantity;
                }
                updateCart();
            }
        }

        function updateCart() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').innerText = totalItems;
            if (currentUser) {
                const userData = users.find(u => u.id === currentUser.id);
                const w = document.getElementById('maxWarning');
                if (userData && totalItems >= userData.maxOrder) { w.style.display = 'block'; w.innerHTML = `‚ö†Ô∏è Maksimal ${userData.maxOrder} ta mahsulot!`; }
                else w.style.display = 'none';
            }
            const list = document.getElementById('cartList');
            list.innerHTML = '';
            let total = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                const currentName = item.name[currentLang] || item.name.uz;
                list.innerHTML += `<div style="display:flex;justify-content:space-between;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid rgba(245,179,66,0.2);">
            <div style="flex:2"><div><b>${currentName}</b></div><div style="font-size:12px;color:var(--text-muted);">${item.weight} | ${item.price.toLocaleString()} so'm</div></div>
            <div style="flex:1;text-align:right;">
                <div style="display:flex;align-items:center;gap:5px;justify-content:flex-end;">
                    <button class="nav-btn" style="padding:5px 10px;" onclick="decreaseQuantity('${item.id}')">‚àí</button>
                    <input type="number" class="quantity-input" value="${item.quantity}" min="0" onchange="setQuantity('${item.id}',this)" style="width:50px;">
                    <button class="nav-btn" style="padding:5px 10px;background:var(--primary);color:#0f0b07;" onclick="increaseQuantity('${item.id}')">+</button>
                </div>
                <div style="margin-top:5px;"><b style="color:var(--primary);">${itemTotal.toLocaleString()} so'm</b></div>
            </div>
        </div>`;
            });
            document.getElementById('totalPrice').innerText = total.toLocaleString();
        }

        function setQuantity(productId, input) {
            if (!currentUser) { alert("Avval kiring!"); toggleProfileDropdown(); return; }
            const userData = users.find(u => u.id === currentUser.id);
            let value = parseInt(input.value);
            const product = products.find(p => p.id === productId);
            if (isNaN(value) || value < 0) value = 0;
            const maxOrder = userData?.maxOrder || 100;
            if (value > maxOrder) value = maxOrder;
            const currentTotal = cart.reduce((sum, item) => { if (item.id === productId) return sum + value; return sum + item.quantity; }, 0);
            if (currentTotal > maxOrder) { alert(`Maksimal ${maxOrder} ta mahsulot!`); input.value = product.quantity; return; }
            product.quantity = value;
            document.getElementById(`qty-${productId}`).textContent = value;
            if (value > 0) {
                const cartItem = cart.find(item => item.id === productId);
                if (cartItem) cartItem.quantity = value;
                else cart.push({ id: product.id, name: product.name, price: product.price, weight: product.weight, quantity: value });
            } else {
                const idx = cart.findIndex(item => item.id === productId);
                if (idx !== -1) cart.splice(idx, 1);
            }
            updateCart();
        }

        function showCheckout() {
            if (!currentUser) { alert("Buyurtma berish uchun avval akkauntga kiring!"); toggleProfileDropdown(); return; }
            const userData = users.find(u => u.id === currentUser.id);
            if (userData && userData.blocked) { alert("Sizning akkauntingiz bloklangan!"); return; }
            if (cart.length === 0) { alert("Savatchangiz bo'sh!"); return; }
            currentStep = 'checkout';
            document.getElementById('cartView').style.display = 'none';
            document.getElementById('checkoutView').style.display = 'block';
            document.getElementById('step1').classList.remove('active');
            document.getElementById('step2').classList.add('active');
            updateCheckoutSummary();
        }

        function showCart() {
            currentStep = 'cart';
            document.getElementById('cartView').style.display = 'block';
            document.getElementById('checkoutView').style.display = 'none';
            document.getElementById('step1').classList.add('active');
            document.getElementById('step2').classList.remove('active');
        }

        function updateCheckoutSummary() {
            const summary = document.getElementById('checkoutSummary');
            let html = '', total = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                const n = item.name[currentLang] || item.name.uz;
                html += `<div class="summary-item"><span>${n} x${item.quantity} (${item.weight})</span><span>${itemTotal.toLocaleString()} ${langData[currentLang].currency}</span></div>`;
            });
            html += `<div class="summary-total"><span>JAMI:</span><span>${total.toLocaleString()} ${langData[currentLang].currency}</span></div>`;
            summary.innerHTML = html;
        }

        function validateOrder() {
            const name = document.getElementById('nameInput').value.trim();
            const surname = document.getElementById('surnameInput').value.trim();
            const phone = document.getElementById('phoneInput').value.trim();
            const address = document.getElementById('addressInput').value.trim();
            let isValid = true;
            document.getElementById('nameError').style.display = name ? 'none' : 'block'; if (!name) isValid = false;
            document.getElementById('surnameError').style.display = surname ? 'none' : 'block'; if (!surname) isValid = false;
            const phoneRegex = /^\+998 \d{2} \d{3} \d{2} \d{2}$/;
            document.getElementById('phoneError').style.display = phoneRegex.test(phone) ? 'none' : 'block'; if (!phoneRegex.test(phone)) isValid = false;
            document.getElementById('addressError').style.display = address ? 'none' : 'block'; if (!address) isValid = false;
            return isValid;
        }

        function submitOrder() {
            if (!currentUser) { alert("Avval kiring!"); return; }
            const userData = users.find(u => u.id === currentUser.id);
            if (userData && userData.blocked) { alert("Akkauntingiz bloklangan!"); return; }
            if (!validateOrder()) { alert("‚ùå Barcha majburiy maydonlarni to'ldiring!"); return; }
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const maxOrder = userData?.maxOrder || 100;
            if (totalItems > maxOrder) { alert(`‚ùå Maksimal ${maxOrder} ta mahsulot!`); return; }
            const name = document.getElementById('nameInput').value.trim();
            const surname = document.getElementById('surnameInput').value.trim();
            const phone = document.getElementById('phoneInput').value.trim();
            const address = document.getElementById('addressInput').value.trim();
            const note = document.getElementById('noteInput').value.trim();
            const promo = document.getElementById('promoInput').value.trim();
            let total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let discount = 0;
            if (promo.toLowerCase() === 'fazo50') { discount = total * 0.5; total = total * 0.5; document.getElementById('promoMessage').innerText = '‚úÖ 50% chegirma!'; }
            else if (promo) document.getElementById('promoMessage').innerText = '‚ùå Noto\'g\'ri promokod';
            const order = {
                id: Date.now(), time: new Date().toLocaleString('uz-UZ'), customer: name + ' ' + surname, phone, address, note: note || 'Yo\'q', userId: currentUser.id,
                items: cart.map(item => ({ name: item.name[currentLang] || item.name.uz, weight: item.weight, quantity: item.quantity, price: item.price, total: item.price * item.quantity })),
                total: Math.round(total), originalTotal: Math.round(total + discount), discount: Math.round(discount)
            };
            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            let msg = "üõç <b>YANGI BUYURTMA</b>\n\n";
            msg += `üë§ <b>Ism:</b> ${name} ${surname}\nüìû <b>Telefon:</b> ${phone}\nüìç <b>Manzil:</b> ${address}\n`;
            if (note) msg += `üìù <b>Eslatma:</b> ${note}\n`;
            if (discount > 0) msg += `üí∞ <b>Chegirma:</b> ${discount.toLocaleString()} so'm\n`;
            msg += `\nüì¶ <b>Buyurtmalar:</b>\n`;
            cart.forEach(item => { const n = item.name[currentLang] || item.name.uz; msg += `   ‚Ä¢ ${n} (${item.weight}) x${item.quantity} = ${(item.price * item.quantity).toLocaleString()} so'm\n`; });
            msg += `\nüíµ <b>JAMI:</b> ${Math.round(total).toLocaleString()} so'm\n‚è∞ <b>Vaqt:</b> ${order.time}`;
            fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: msg, parse_mode: 'HTML' }) }).catch(e => console.log(e));
            alert("‚úÖ Buyurtmangiz qabul qilindi! Tez orada operator siz bilan bog'lanadi.");
            products.forEach(p => p.quantity = 0);
            cart = [];
            updateCart();
            document.getElementById('addressInput').value = '';
            document.getElementById('noteInput').value = '';
            document.getElementById('promoInput').value = '';
            document.getElementById('promoMessage').innerText = '';
            showCart();
            togglePanel('cartPanel');
            displayProducts(currentCategory);
            if (isAdminLoggedIn) updateAdminStats();
        }

        // ========================
        // LANGUAGE
        // ========================
        function changeLang(lang) {
            currentLang = lang;
            const d = langData[lang];
            document.getElementById('navAbout').innerText = d.navAbout;
            document.getElementById('navAdmin').innerText = d.navAdmin;
            document.getElementById('badgeText').innerText = d.badgeText;
            document.getElementById('heroTitle').innerHTML = d.heroTitle;
            document.getElementById('heroDesc').innerText = d.heroDesc;
            document.getElementById('ctaBtn').innerText = d.ctaBtn;
            document.getElementById('stat1').innerText = d.stat1;
            document.getElementById('stat2').innerText = d.stat2;
            document.getElementById('stat3').innerText = d.stat3;
            document.getElementById('cartTitle').innerText = d.cartTitle;
            document.getElementById('totalLabel').innerText = d.totalLabel;
            document.querySelectorAll('.currency').forEach(el => el.innerText = d.currency);
            document.getElementById('aboutTitle').innerText = d.aboutTitle;
            document.getElementById('aboutText1').innerText = d.aboutText1;
            document.getElementById('aboutLocation').innerText = d.aboutLocation;
            document.getElementById('aboutPhone').innerText = d.aboutPhone;
            document.getElementById('aboutTG').innerText = d.aboutTG;
            document.getElementById('aboutName').innerText = d.aboutName;
            updateSearchPlaceholder();
            document.getElementById('searchResultText').innerText = ` ${d.searchResults}`;
            const cats = ['all', 'milliy', 'osiyo', 'salat', 'kabob', 'gazak', 'ichimlik', 'shirinlik'];
            const catNames = { all: d.all, milliy: d.milliy, osiyo: d.osiyo, salat: d.salat, kabob: d.kabob, gazak: d.gazak, ichimlik: d.ichimlik, shirinlik: d.shirinlik };
            document.getElementById('filterBar').innerHTML = cats.map(c => `<button class="filter-btn ${c === currentCategory ? 'active' : ''}" onclick="filterMenu('${c}',this)">${catNames[c]}</button>`).join('');
            displayProducts(currentCategory);
        }

        function filterMenu(cat, btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            displayProducts(cat);
        }

        function togglePanel(id) {
            document.getElementById(id).classList.toggle('active');
            if (id === 'cartPanel' && currentStep === 'checkout') showCart();
        }

        function toggleAbout(show) { document.getElementById('aboutModal').style.display = show ? 'flex' : 'none'; }

        window.onscroll = function () {
            const btn = document.getElementById('scrollToTop');
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) btn.classList.add('show');
            else btn.classList.remove('show');
        };

        function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }

        // ========================
        // ADMIN PANEL
        // ========================
        function toggleAdminPanel() {
            document.getElementById('adminPanel').classList.toggle('active');
            if (!isAdminLoggedIn) {
                document.getElementById('adminLogin').style.display = 'block';
                document.getElementById('adminContent').style.display = 'none';
            }
        }

        function checkAdminPassword() {
            const password = document.getElementById('adminPassword').value;
            if (password === "00987") {
                isAdminLoggedIn = true;
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminContent').style.display = 'block';
                updateAdminStats();
                displayOrders();
                displayUsers();
                displayProductsForEdit();
            } else {
                alert("‚ùå Noto'g'ri parol!");
            }
        }

        function logoutAdmin() {
            isAdminLoggedIn = false;
            document.getElementById('adminLogin').style.display = 'block';
            document.getElementById('adminContent').style.display = 'none';
            document.getElementById('adminPassword').value = '';
            toggleAdminPanel();
        }

        function switchAdminTab(tab, el) {
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.admin-content').forEach(c => c.classList.remove('active'));
            if (el) el.classList.add('active');
            document.getElementById(tab).classList.add('active');
            if (tab === 'orders') displayOrders();
            if (tab === 'users') displayUsers();
            if (tab === 'products') displayProductsForEdit();
            if (tab === 'dashboard') updateAdminStats();
        }

        function updateAdminStats() {
            document.getElementById('totalOrdersStat').innerText = orders.length;
            const totalRevenue = orders.reduce((sum, o) => sum + o.total, 0);
            document.getElementById('totalRevenueStat').innerText = totalRevenue.toLocaleString();
            document.getElementById('totalProductsStat').innerText = products.length;
            const recent = orders.slice(-5).reverse();
            let html = '<table class="orders-table"><tr><th>Vaqt</th><th>Mijoz</th><th>Jami</th><th>Amallar</th></tr>';
            recent.forEach(o => {
                html += `<tr>
            <td>${o.time}</td>
            <td>${o.customer}</td>
            <td>${o.total.toLocaleString()} so'm</td>
            <td><button class="delete-order-btn" onclick="deleteOrder(${o.id})">üóë O'chirish</button></td>
        </tr>`;
            });
            html += '</table>';
            document.getElementById('recentOrdersList').innerHTML = html;
        }

        function displayOrders() {
            const list = document.getElementById('ordersList');
            let html = '';
            orders.slice().reverse().forEach(o => {
                const items = o.items.map(i => `${i.name} (${i.weight}) x${i.quantity}`).join('<br>');
                html += `<tr>
            <td>${o.time}</td>
            <td>${o.customer}</td>
            <td>${o.phone}</td>
            <td>${o.address.length > 30 ? o.address.substring(0, 30) + '...' : o.address}</td>
            <td class="order-items">${items}</td>
            <td>${o.total.toLocaleString()} so'm</td>
            <td>${o.note || '‚Äî'}</td>
            <td><button class="delete-order-btn" onclick="deleteOrder(${o.id})">üóë O'chirish</button></td>
        </tr>`;
            });
            list.innerHTML = html;
        }

        function deleteOrder(orderId) {
            if (confirm("Rostdan ham bu buyurtmani o'chirmoqchimisiz?")) {
                orders = orders.filter(o => o.id !== orderId);
                localStorage.setItem('orders', JSON.stringify(orders));
                if (document.getElementById('orders').classList.contains('active')) {
                    displayOrders();
                }
                if (document.getElementById('dashboard').classList.contains('active')) {
                    updateAdminStats();
                }
                alert("‚úÖ Buyurtma o'chirildi!");
            }
        }

        function displayProductsForEdit() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            let filtered = products;
            if (adminSearchQuery.length > 0) filtered = products.filter(p => p.name.uz.toLowerCase().includes(adminSearchQuery));
            if (adminSearchQuery.length > 0) document.getElementById('adminSearchCount').innerText = filtered.length;
            if (filtered.length === 0 && adminSearchQuery.length > 0) { grid.innerHTML = `<div class="no-results">üîç Hech narsa topilmadi</div>`; return; }
            filtered.forEach(p => {
                const currentName = p.name.uz;
                grid.innerHTML += `
        <div class="product-edit-card">
            <img src="${p.img}" onclick="changeProductImage('${p.id}')" title="Rasmni o'zgartirish">
            <div style="margin-bottom:10px;"><span class="product-weight-badge">‚öñÔ∏è ${p.weight}</span><span class="product-category-badge">${p.cat}</span></div>
            <input type="text" value="${currentName}" id="name-${p.id}" placeholder="Nomi">
            <input type="text" value="${p.weight}" id="weight-${p.id}" placeholder="Miqdori">
            <select id="cat-${p.id}">
                <option value="milliy" ${p.cat === 'milliy' ? 'selected' : ''}>O'zbek</option>
                <option value="osiyo" ${p.cat === 'osiyo' ? 'selected' : ''}>Osiyo</option>
                <option value="salat" ${p.cat === 'salat' ? 'selected' : ''}>Salat</option>
                <option value="kabob" ${p.cat === 'kabob' ? 'selected' : ''}>Kabob</option>
                <option value="gazak" ${p.cat === 'gazak' ? 'selected' : ''}>Gazak</option>
                <option value="ichimlik" ${p.cat === 'ichimlik' ? 'selected' : ''}>Ichimlik</option>
                <option value="shirinlik" ${p.cat === 'shirinlik' ? 'selected' : ''}>Shirinlik</option>
            </select>
            <input type="number" value="${p.price}" id="price-${p.id}" placeholder="Narxi">
            <button class="save-btn" onclick="saveProduct('${p.id}')">Saqlash</button>
            <button class="delete-btn" onclick="deleteProduct('${p.id}')">O'chirish</button>
        </div>`;
            });
        }

        function changeProductImage(productId) {
            const url = prompt("Yangi rasm URL manzilini kiriting:");
            if (url) {
                const product = products.find(p => p.id === productId);
                if (product) { product.img = url; displayProducts(currentCategory); if (document.getElementById('products').classList.contains('active')) displayProductsForEdit(); }
            }
        }

        function saveProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                product.name.uz = document.getElementById(`name-${productId}`).value;
                product.weight = document.getElementById(`weight-${productId}`).value;
                product.cat = document.getElementById(`cat-${productId}`).value;
                product.price = parseInt(document.getElementById(`price-${productId}`).value);
                alert("‚úÖ Mahsulot saqlandi!");
                displayProducts(currentCategory);
                displayProductsForEdit();
            }
        }

        function deleteProduct(productId) {
            if (confirm("Rostdan ham o'chirmoqchimisiz?")) {
                const idx = products.findIndex(p => p.id === productId);
                if (idx !== -1) { products.splice(idx, 1); displayProducts(currentCategory); displayProductsForEdit(); updateAdminStats(); }
            }
        }

        function addNewProduct() {
            const name = document.getElementById('newProductName').value.trim();
            const cat = document.getElementById('newProductCat').value;
            const price = parseInt(document.getElementById('newProductPrice').value);
            const weight = document.getElementById('newProductWeight').value.trim();
            const img = document.getElementById('newProductImage').value.trim();
            if (!name) { alert("‚ùå Mahsulot nomini kiriting!"); return; }
            if (!price || price <= 0) { alert("‚ùå To'g'ri narx kiriting!"); return; }
            if (!weight) { alert("‚ùå Mahsulot miqdorini kiriting!"); return; }
            const newProduct = { id: 'new' + Date.now(), cat, name: { uz: name, ru: name, en: name }, weight, price, img: img || "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=400", quantity: 0 };
            products.push(newProduct);
            alert("‚úÖ Yangi mahsulot qo'shildi!");
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductWeight').value = '300g';
            displayProducts(currentCategory);
            updateAdminStats();
            switchAdminTab('products', document.querySelectorAll('.admin-tab')[3]);
            displayProductsForEdit();
        }

        function updateSearchPlaceholder() { document.getElementById('searchInput').placeholder = langData[currentLang].searchPlaceholder; }

        function filterAdminProducts() {
            const searchInput = document.getElementById('adminSearchInput');
            const clearBtn = document.getElementById('adminClearSearch');
            const statsDiv = document.getElementById('adminSearchStats');
            adminSearchQuery = searchInput.value.toLowerCase().trim();
            clearBtn.style.display = adminSearchQuery.length > 0 ? 'block' : 'none';
            statsDiv.style.display = adminSearchQuery.length > 0 ? 'block' : 'none';
            displayProductsForEdit();
        }

        function clearAdminSearch() {
            document.getElementById('adminSearchInput').value = '';
            adminSearchQuery = '';
            document.getElementById('adminClearSearch').style.display = 'none';
            document.getElementById('adminSearchStats').style.display = 'none';
            displayProductsForEdit();
        }

        function goToProduct(productId) {
            const element = document.getElementById(`card-${productId}`);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                element.style.transform = 'scale(1.02)';
                element.style.borderColor = 'var(--primary)';
                setTimeout(() => { element.style.transform = ''; }, 1000);
            }
        }

        // INIT
        createProfileDropdown();
        changeLang('uz');
        updateSearchPlaceholder();
        updateProfileDropdown();
        updateCheckoutForm();
        updateLoginRequiredMessage();
        document.getElementById('addressInput').value = ''; // Manzil bo'sh
    </script>
</body>

</html>